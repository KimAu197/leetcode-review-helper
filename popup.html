<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LeetCode Spaced Repetition</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>LeetCode Review Helper</h1>
      <p class="subtitle">Spaced Repetition + Practice Tracker</p>
    </div>

    <!-- 统计面板 -->
    <div class="stats-panel">
      <div class="stat-card practice">
        <div class="stat-value" id="todayPractice">0</div>
        <div class="stat-label">今日刷题</div>
      </div>
      <div class="stat-card highlight">
        <div class="stat-value" id="todayReviews">0</div>
        <div class="stat-label">待复习</div>
      </div>
      <div class="stat-card today-done">
        <div class="stat-value" id="todayCompleted">0</div>
        <div class="stat-label">已复习</div>
      </div>
      <div class="stat-card">
        <div class="stat-value" id="totalProblems">0</div>
        <div class="stat-label">总题数</div>
      </div>
    </div>

    <!-- Tab导航 -->
    <div class="tabs">
      <button class="tab-btn active" data-tab="practice">今日</button>
      <button class="tab-btn" data-tab="review">复习</button>
      <button class="tab-btn" data-tab="stats">统计</button>
      <button class="tab-btn" data-tab="tags">标签</button>
      <button class="tab-btn" data-tab="settings">设置</button>
    </div>

    <!-- 今日刷题标签页 -->
    <div class="tab-content active" id="tab-practice">
      <!-- 每日计划 -->
      <div id="dailyPlanSection"></div>
      <!-- 今日最该复习 Top3 -->
      <div id="top3Card"></div>

      <div id="tagStatsSection" class="tag-stats-section hidden">
        <h3 class="section-title">今日 Tag 分布</h3>
        <div id="tagStatsChart" class="tag-stats-chart"></div>
      </div>
      <div id="todayDiffSection" class="diff-section hidden">
        <h3 class="section-title">今日难度分布</h3>
        <div id="todayDiffChart" class="diff-chart"></div>
      </div>
      <h3 class="section-title" style="margin-top:12px">刷题记录</h3>
      <div id="practiceList" class="problem-list">
        <div class="empty-state">
          <p>今天还没有刷题记录</p>
          <small>在LeetCode题目页点击"记录刷题"按钮</small>
        </div>
      </div>
    </div>

    <!-- 复习标签页 -->
    <div class="tab-content" id="tab-review">
      <h3 class="section-title" id="reviewPendingTitle">待复习</h3>
      <div id="reviewPendingList" class="problem-list">
        <div class="empty-state small"><p>今天没有需要复习的题目</p></div>
      </div>
      <h3 class="section-title" id="reviewDoneTitle" style="margin-top:16px;">今日已复习</h3>
      <div id="reviewDoneList" class="problem-list">
        <div class="empty-state small"><p>还没有完成复习</p></div>
      </div>
    </div>

    <!-- 统计标签页 -->
    <div class="tab-content" id="tab-stats">
      <!-- 连续天数 & 成就 -->
      <div id="streakSection"></div>
      <div id="achievementsSection"></div>

      <h3 class="section-title">累计难度分布</h3>
      <div id="totalDiffChart" class="diff-chart"></div>

      <h3 class="section-title" style="margin-top:18px">每日刷题量（近30天）</h3>
      <div id="dailyBarChart" class="daily-bar-chart"></div>

      <div id="statsSummary" class="stats-summary"></div>
    </div>

    <!-- 按标签标签页 -->
    <div class="tab-content" id="tab-tags">
      <div id="tagFilterSection" class="tag-filter-section">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;">
          <p class="section-desc" style="margin:0;">选择标签查看相关题目</p>
          <button id="refreshTagsBtn" class="btn-refresh">刷新标签</button>
        </div>
        <div id="tagFilterChips" class="tag-filter-chips"></div>
      </div>
      <div id="tagProblemList" class="problem-list">
        <div class="empty-state"><p>选择一个标签开始浏览</p></div>
      </div>
    </div>

    <!-- 设置标签页 -->
    <div class="tab-content" id="tab-settings">
      <div class="settings-section">
        <h3>每日目标</h3>
        <p class="settings-desc">设定你的每日刷题和复习计划</p>
        <div id="goalsEditor"></div>
      </div>

      <div class="settings-section">
        <h3>复习间隔（天）</h3>
        <p class="settings-desc">自定义遗忘曲线复习间隔</p>
        <div id="intervalsEditor" class="intervals-editor"></div>
        <div class="interval-add-row">
          <input type="number" id="newIntervalInput" min="1" max="365" placeholder="天数" class="interval-input">
          <button id="addIntervalBtn" class="btn-add-interval">添加</button>
        </div>
        <button id="resetIntervalsBtn" class="btn-secondary" style="margin-top:8px;">恢复默认 (1,3,7,14,30,60)</button>
      </div>

      <div class="settings-section">
        <h3>Google Calendar</h3>
        <p class="settings-desc">将复习计划同步到Google Calendar</p>
        <button id="connectCalendar" class="btn-primary">连接Google Calendar</button>
        <div id="calendarStatus" class="status-message hidden"></div>
      </div>

      <div class="settings-section">
        <h3>数据管理</h3>
        <button id="exportData" class="btn-secondary">导出数据</button>
        <button id="importData" class="btn-secondary">导入数据</button>
        <button id="clearData" class="btn-danger">清空所有数据</button>
      </div>
    </div>

    <div class="footer">
      <p>v2.0.0 | Made with ❤️ by Kenzie</p>
    </div>
  </div>

  <script src="popup.js"></script>
</body>
</html>
